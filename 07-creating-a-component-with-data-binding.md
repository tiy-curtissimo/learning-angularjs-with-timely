# Your Second Component (Part 1 of 3): Get It On The Page

You did such a great job with the last component, that
you don't want to lose your momentum. You choose to
take the next step and try out something harder. You
choose to replace the login card with an AngularJS
component.

![timely - the login box](https://tiy-corp-train.github.io/newline-media/learning-angularjs-with-timely/login-box-highlighted.png)

You immediately realize that this one is more
difficult than the rest. This has some behavior, so
you make a little list for yourself:

> The login component should:
>
> 1. Enable the "WATCH TIME" button only when both
> text fields have input
> 1. Use AJAX to authenticate the user

You follow the five steps of general creation.

[callout-steps]
## Create and Register the Files for the Component
### Step 1: Create the files
You decide to name your component `login-card` and
create the subdirectory and files accordingly.

![timely - the login-card files](https://tiy-corp-train.github.io/newline-media/learning-angularjs-with-timely/create-login-card-files.png)

### Step 2: Add the component file to the Web page
You open the `session/login.html` file, again, and
add your newly-created file to the list of `<script>`
tags at the bottom fo the file.

```html
  <script src="/app/app.module.js"></script>
  <script src="/app/registration-cta/registration-cta.component.js"></script>

  <!-- The new login card component! -->
  <script src="/app/login-card/login-card.component.js"></script>
</body>

```

### Step 3 Define and register the AngularJS component
In `login-card.component.js`, you write the JavaScript
that AngularJS requires you to register and define the
component just like with the last component.

```js
angular
  .module('app')
  .component('loginCard', {
    templateUrl: '/app/login-card/login-card.component.html'
  });
```

### Step 4: Add the HTML into the component HTML file
You do the same thing you did before and grab the HTML
from the `<div>` in the `session/login.html` file to
create the content of the 'login-card.component.html`
file.

```html
<form method="post" action="/session/mine">
  <div class="card-art"></div>
  <div class="card-content">
    <div>{{ error }}</div>
    <input autofocus type="text" placeholder="username" name="username">
    <input type="password" placeholder="password" name="password">
  </div>
  <div class="card-actions">
    <button class="button-primary">Watch time</button>
  </div>
  <input type="hidden" name="{{ _csrf.parameterName }}" value="{{ _csrf.token }}">
</form>
```

### Step 5: Change the `login.html` page to use the
component

You delete the content that you just moved from the
`session/login.html` file and replace it with your
new `login-card` component.

```html
<body ng-app="app">

  <!-- Add the new login-card component -->
  <login-card class="card login-card"></login-card>

  <registration-cta class="card login-card"></registration-cta>
  <script src="/js/angular-1.6.4.min.js"></script>
```
[/callout-steps]

After all of that, you see that nothing has changed.
What has changed, though, is that the login form
doesn't work, anymore. The server complains about the
CSRF token being null.

You look in the developer tools of your browser and
see that the HTML code that used to create the CSRF
token ```<input type="hidden" name="{{
_csrf.parameterName }}" value="{{ _csrf.token }}">```
rendered without a name or value.

![timely - where is the CSRF?](https://tiy-corp-train.github.io/newline-media/learning-angularjs-with-timely/login-messed-up-elements.png)

This makes total sense to you. Originally, Spring on
the server was taking this input and rendering the
HTML. It knew the CSRF token and could populate the
parameter name and token value correctly. Now, that
HTML is being generated by AngularJS which doesn't
know how to render a CSRF token into HTML, here. You
will have to rely on AngularJS to handle the CSRF
token by using AJAX because it *does* know how to
handle CSRF tokens using AJAX.

You delete the CSRF hidden field line from the
component's HTML.

## What Did You Do?

You just reinforced everything that you learned in the
last lesson. This is the way that we begin each
component, with these steps:

1. Created a `login-card` directory for your component;
1. Created a `.js` and `.html` file for you component;
1. Added a new `<script>` tag that includes the
   component's `.js` file.
1. Declared the component with its name in
   **camelCase** and registering the component using the
`component` method of the `angular.module`;
1. Added the component's HTML to its `.html` file;
   and,
1. Added the newly created custom tag to the the
   Web page.

But, it's still broken. You know that you have two
more steps to get this to a working state, so you
start with data binding.
